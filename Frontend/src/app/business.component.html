
<div class="container" style="margin-top:100px;">
  <div class="row">
    <div class="col-sm-12">
      <div class="card text-white bg-primary mb-3">
        <div *ngFor="let business of webService.business_list | async">
          <div class="card-header">
            {{ business.name }}
          </div>
          <div class="card-body">
            This business is based in
            {{ business.town }}
          </div>
          <div class="card-footer">
            {{ business.reviews.length }}
            reviews available
          </div>
        </div>
      </div>
      <!-- col -->
    </div>
    <!-- row -->
  </div>
  <!-- container -->
</div>

<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <div
        class="card bg-light mb-3"
        *ngFor="let review of webService.reviews_list | async"
      >
        <div class="card-header">Review by {{ review.username }}</div>
        <div class="card-body">
          {{ review.comment }}
          <hr />
          <p><strong>Rating:</strong> {{ review.stars }}</p>
        </div>
      </div>
    </div>
    <!-- col -->
  </div>
  <!-- row -->
</div>
<!-- container -->

<div *ngIf="authService.loggedIn"  class="container">
  <div class="row">
    <div class="col-sm-12">
      <h2>Please review this business</h2>
      <form [formGroup]="reviewForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="name">Name</label>
          <input
            type="text"
            id="name"
            name="name"
            class="form-control"
            formControlName="name"
            [ngClass]="{ error: isInvalid('name') }"
          />
        </div>
        <div class="form-group">
          <label for="review">Please leave your review below</label>
          <textarea
            id="review"
            rows="3"
            name="review"
            class="form-control"
            formControlName="review"
            [ngClass]="{ error: isInvalid('review') }"
          >
          
          </textarea>
        </div>
        <div class="form-group">
          <label for="stars">Please provide a rating (5 = best)</label>
          <select
            id="stars"
            name="stars"
            class="form-control"
            formControlName="stars"
          >
            <option value="1">1 star</option>
            <option value="2">2 stars</option>
            <option value="3">3 stars</option>
            <option value="4">4 stars</option>
            <option value="5">5 stars</option>
          </select>
        </div>
        <span *ngIf="isIncomplete()"> You must complete all fields</span>
        <button  *ngIf="!isIncomplete()" type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
  </div>
</div>

<div *ngIf="!authService.loggedIn" class="container">
  <div class="row">
  <div class="col-sm-12">
  <h2>Please login to review this business</h2>
  </div>
  </div>
 </div>
